<import src="/tpls/loading/loading.wxml" />

<view class="page_comment">
  <block wx:for="{{list}}" wx:key="index" wx:for-item="blockItem">
    <view class="page_comment_item" wx:for="{{blockItem}}" wx:key="_id">
      <view class="page_comment_avata"><image src="{{item.avatarUrl}}" /></view>
      <view class="page_comment_main">
        <text class="page_comment_nickname">{{item.nickName}}</text>
        <text class="page_comment_date">{{item.date}}</text>
        <text class="page_comment_cnt">{{item.cnt}}</text>
        <view bind:tap="onTapDelete" class="page_comment_delete" wx:if="{{userOpenId && item.openId && userOpenId === item.openId}}" data-id="{{item._id}}">
          <image class="page_comment_delete_icon" mode="aspectFit" src="/image/pages/comment/more.svg" />
        </view>
      </view>
    </view>
  </block>

  <template is="loading" data="{{ isLoading, loadingText: 'æ’ˆç·Šå–‡å¤§ä½¬ğŸ¤¦ğŸ»â€â™‚ï¸', isNoShowImage: true }}" />
</view>

<view class="page_comment_post" bind:tap="onTapPost">
  <text class="page_comment_post_txt">è¯´ç‚¹ä»€ä¹ˆå§ï¼š</text>
</view>

<template is="loading" data="{{ isLoading: isIniting }}" />
<error
  wx:if="{{isError}}"
  bindtapReload="onErrorReload"
/>
<comment
  postId="{{postId}}"
  isShowComment="{{isShowComment}}"
  bind:closeComment="onCloseComment"
  bind:getComments="onGetComments"
/>