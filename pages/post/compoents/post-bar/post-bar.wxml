<wxs module="postBar">
  var nums = function (num) {
    if (num >= 1000 && num < 10000) {
      num = Math.floor((num / 1000) * 100) / 100  + 'k'
    }

    if (num >= 10000 && num < 1000000) {
      num = Math.floor((num / 10000) * 10) / 10 + 'w'
    }

    if (num >= 1000000 && num < 10000000) {
      num = parseInt(num / 1000000) + '百萬'
    }

    if (num >= 10000000 && num < 100000000) {
      num = parseInt(num / 10000000) + '千萬'
    }

    if (num >= 100000000 && num < 100000000000) {
      num = parseInt(num / 100000000) + '億'
    }

    return num;
  };

  module.exports = {
    nums: nums
  }
</wxs>

<view class="post_bar{{isShow ? ' post_bar_show' : ''}}">

  <!-- <view class="post_bar_main" hidden="{{isComment}}">
    <view class="post_bar_comment" bind:tap="onTapComment">发表精彩评论</view>
    <view class="post_bar_tool">
      <image class="post_bar_tool_image" src="/image/components/post-bar/comment.svg" mode="heightFix" />
      <text class="post_bar_tool_item_txt">{{postInfo.comments || 0}}</text>
    </view>
    <view class="post_bar_tool{{isMark ? ' post_bar_tool_on' : ''}}" bind:tap="onTapMark">
      <image class="post_bar_tool_image" src="/image/components/post-bar/{{ isMark ? 'stared' : 'star'}}.svg" mode="heightFix" />
      <text class="post_bar_tool_item_txt">{{postBar.nums(postInfo.marks) || 0}}</text>
    </view>
    <view class="post_bar_tool{{isLike ? ' post_bar_tool_on' : ''}}" bind:tap="onTapLike">
      <image class="post_bar_tool_image" src="/image/components/post-bar/{{ isLike ? 'liked' : 'like'}}.svg" mode="heightFix" />
      <text class="post_bar_tool_item_txt">{{postInfo.likes || 0}}</text>
    </view>
    <view class="post_bar_tool">
      <button open-type="share" class="post_bar_tool_sharebtn"></button>
      <image class="post_bar_tool_image" src="/image/components/post-bar/share.svg" mode="heightFix" />
    </view>
  </view> -->

  <form class="post_bar_edit">
    <textarea class="post_bar_txtarea" fixed placeholder="发表精彩评论"
      show-confirm-bar="{{false}}"
      cursor-spacing="{{155}}"
    />
    <button form-type="submit" class="post_bar_comment_submit">发表</button>
  </form>
</view>

<!-- <view class="post_bar_mask"></view> -->